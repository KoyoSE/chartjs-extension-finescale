/* !
 * chartjs-extension-finescale.js
 *
 * Version: 0.0.1
 *
 * chartjs-extension-finescale.js Copyright 2016 koyoSE
 * Released under the MIT license
 * https://github.com/KoyoSE/chartjs-extension-finescale.git
 *
 * Chart.js Copyright 2016 Nick Downie
 * Released under the MIT license
 * https://github.com/chartjs/Chart.js/blob/master/LICENSE.md
 */
!function t(i,e,a){function s(l,o){if(!e[l]){if(!i[l]){var r="function"==typeof require&&require;if(!o&&r)return r(l,!0);if(n)return n(l,!0);var c=new Error("Cannot find module '"+l+"'");throw c.code="MODULE_NOT_FOUND",c}var f=e[l]={exports:{}};i[l][0].call(f.exports,function(t){var e=i[l][1][t];return s(e?e:t)},f,f.exports,t,i,e,a)}return e[l].exports}for(var n="function"==typeof require&&require,l=0;l<a.length;l++)s(a[l]);return s}({1:[function(t,i,e){t(2)(Chart),t(3)(Chart),t(4)(Chart),t(6)(Chart),t(7)(Chart),t(5)(Chart)},{2:2,3:3,4:4,5:5,6:6,7:7}],2:[function(t,i,e){"use strict";i.exports=function(t){var i=t.helpers;t.FineScale={getScaleOptionsAray:function(t){var i=this,e=[];return e[0]=i.options,e[1]=e[0].subScale?e[0].subScale:{},e[2]=e[1].subScale?e[1].subScale:{},t?[e[0][t]?e[0][t]:{},e[1][t]?e[1][t]:{},e[2][t]?e[2][t]:{}]:e},update:function(t,e,a){var s=this;return s.beforeUpdate(),s.maxWidth=t,s.maxHeight=e,s.margins=i.extend({left:0,right:0,top:0,bottom:0},a),s.longestTextCache=s.longestTextCache||{},s.beforeSetDimensions(),s.setDimensions(),s.afterSetDimensions(),s.beforeDataLimits(),s.determineDataLimits(),s.afterDataLimits(),s.beforeBuildTicks(),s.buildTicks(),s.afterBuildTicks(),s.beforeTickToLabelConversion(),s.convertTicksToLabels(),s.generateTicksInformation(),s.afterTickToLabelConversion(),s.beforeCalculateTickRotation(),s.calculateTickRotation(),s.preventionTicksDisplay(),s.afterCalculateTickRotation(),s.beforeFit(),s.fit(),s.afterFit(),s.afterUpdate(),s.minSize},generateTicksInformation:function(){var t=this,i=t.getScaleOptionsAray("ticks");if(t.ticks||(t.ticks=[]),!t.ticksLevel||t.ticks.length!==t.ticksLevel.length){t.ticksLevel=[];for(var e=0;e<t.ticks.length;e++)t.ticksLevel.push(0)}var a,s=[],n=[],l=[];for(e=0;e<t.ticks.length;e++)a=0===e||(e===t.ticks.length-1||!!i[t.ticksLevel[e]].display),s.push(a),a&&(l.push(t.ticks[e]),n.push(e));t.ticksIsDisplay=s,t.ticksDisplay=l,t.ticksDisplayIndex=n},computeTextSize:function(t,e,a){return i.isArray(e)?i.longestText(t,a,e):t.measureText(e).width},parseFontOptions:function(e){var a=i.getValueOrDefault,s=t.defaults.global,n=a(e.fontSize,s.defaultFontSize),l=a(e.fontStyle,s.defaultFontStyle),o=a(e.fontFamily,s.defaultFontFamily);return{size:n,style:l,family:o,font:i.fontString(n,l,o)}},draw:function(t){var i=this;i.drawCanvas(i.getItemsToDraw(t))},getItemsToDraw:function(e){var a=this,s=a.getScaleOptionsAray();if(s[0].display){var n=t.defaults.global,l=a.getScaleOptionsAray("ticks"),o=a.getScaleOptionsAray("gridLines"),r=o[0].drawTicks?[o[0].tickMarkLength,o[1].drawTicks?o[1].tickMarkLength||.6*o[0].tickMarkLength:0,o[2].drawTicks?o[2].tickMarkLength||.4*o[0].tickMarkLength:0]:[0,0,0],c=a.isHorizontal(),f=0!==a.labelRotation,d=i.toRadians(a.labelRotation),p=[];if(c){var k;l[0].maxTicksLimit&&(k=l[0].maxTicksLimit);var g=!1;if(l[0].autoSkip){var m=Math.cos(d),h=f?a.longestLabelWidth*m/2:a.longestLabelWidth*m,u=(h+l[0].autoSkipPadding)*a.ticksDisplay.length,x=a.width-(a.paddingLeft+a.paddingRight);if(u>x&&(g=1+Math.floor(u/x)),k&&a.ticksDisplay.length>k)for(;!g||a.ticks.length/(g||1)>k;)g||(g=1),g+=1}}var v=[a.parseFontOptions(l[0]),a.parseFontOptions(l[1]),a.parseFontOptions(l[2])];return i.each(a.ticks,function(t,k){if(void 0!==t&&null!==t){var m=a.ticksLevel[k],h=0===k,u=k===a.ticks.length-1;if(s[0].display&&(h||u||s[m].display)){var x=g>1&&k%g>0||k%g===0&&k+g>=a.ticksDisplay.length;if(!x||u){var T,S,y=i.getValueOrDefault(o[m].borderDash,o[0].borderDash),b=i.getValueOrDefault(o[m].borderDashOffset,o[0].borderDashOffset),D=!!o[0].display&&i.getValueOrDefault(o[m].display,o[0].display),L=!!o[0].drawTicks&&i.getValueOrDefault(o[m].drawTicks,o[0].drawTicks),F=!!o[0].drawOnChartArea&&i.getValueOrDefault(o[m].drawOnChartArea,o[0].drawOnChartArea);if(k===("undefined"!=typeof a.zeroLineIndex?a.zeroLineIndex:0))T=o[0].zeroLineWidth,S=o[0].zeroLineColor;else{var z=i.getValueAtIndexOrDefault(o[0].lineWidth,k),M=i.getValueAtIndexOrDefault(o[m].lineWidth,k,o[0].lineWidth);T=i.isArray(o[0].lineWidth)?z:M;var O=i.getValueAtIndexOrDefault(o[0].color,k),w=i.getValueAtIndexOrDefault(o[m].color,k,o[0].color);S=i.isArray(o[0].color)?O:w}var I,C,U,R,A,P,V,Y,W,B,H=i.getValueOrDefault(l[m].fontColor,n.defaultFontColor),X="middle",q="middle";if(c){"bottom"===s[0].position?(q=f?"middle":"top",X=f?"right":"center",B=f?a.top+r[0]:a.top+r[m]):(q=f?"middle":"bottom",X=f?"left":"center",B=f?a.bottom-r[0]:a.bottom-r[m]),W=a.getPixelForTick(k,o[0].offsetGridLines)+l[0].labelOffset;var N=a.getPixelForTick(k)+i.aliasPixel(T),E="bottom"===s[0].position?a.top:a.bottom-r[m],G="bottom"===s[0].position?a.top+r[m]:a.bottom;I=U=A=V=N,C=E,R=G,P=e.top,Y=e.bottom}else{var Q,_="left"===s[0].position,j=l[0].padding;l[0].mirror?(X=_?"left":"right",Q=j):(X=_?"right":"left",Q=r[m]+j),W=_?a.right-Q:a.left+Q;var J=a.getPixelForTick(k)+i.aliasPixel(T);B=a.getPixelForTick(k,o[0].offsetGridLines);var K="right"===s[0].position?a.left:a.right-r[m],Z="right"===s[0].position?a.left+r[m]:a.right;I=K,U=Z,A=e.left,V=e.right,C=R=P=Y=J}p.push({display:D,level:m,tlDraw:L,tlX1:I,tlY1:C,tlX2:U,tlY2:R,tlColor:o[0].color,tFont:v[m],glDraw:F,glX1:A,glY1:P,glX2:V,glY2:Y,glWidth:T,glColor:S,glBorderDash:y,glBorderDashOffset:b,lDisplay:a.ticksIsDisplay[k],lX:W,lY:B,label:t,lRotation:-1*d,lTextBaseline:q,lTextAlign:X,lFontColor:H})}}}}),p}},drawCanvas:function(e){var a=this,s=a.ctx,n=a.getScaleOptionsAray(),l=t.defaults.global,o=a.isHorizontal(),r=a.getScaleOptionsAray("gridLines"),c=a.getScaleOptionsAray("scaleLabel"),f=i.getValueOrDefault(c[0].fontColor,l.defaultFontColor),d=a.parseFontOptions(c[0]);if(i.each(e,function(t){if(t.display&&(s.save(),s.lineWidth=t.glWidth,s.strokeStyle=t.tlColor,s.beginPath(),t.tlDraw&&(s.moveTo(t.tlX1,t.tlY1),s.lineTo(t.tlX2,t.tlY2)),s.stroke(),s.strokeStyle=t.glColor,s.setLineDash&&(s.setLineDash(t.glBorderDash),s.lineDashOffset=t.glBorderDashOffset),t.glDraw&&(s.moveTo(t.glX1,t.glY1),s.lineTo(t.glX2,t.glY2)),s.stroke(),s.restore()),t.lDisplay){s.save(),s.translate(t.lX,t.lY),s.rotate(t.lRotation),s.font=t.tFont.font,s.fillStyle=t.lFontColor,s.textBaseline=t.lTextBaseline,s.textAlign=t.lTextAlign;var e=t.label;if(i.isArray(e))for(var a=0,n=0;a<e.length;++a)s.fillText(""+e[a],0,n),n+=1.5*t.tFont.size;else s.fillText(e,0,0);s.restore()}}),c[0].display){var p,k,g=0;if(o)p=a.left+(a.right-a.left)/2,k="bottom"===n[0].position?a.bottom-d.size/2:a.top+d.size/2;else{var m="left"===n[0].position;p=m?a.left+d.size/2:a.right-d.size/2,k=a.top+(a.bottom-a.top)/2,g=-.5*Math.PI}s.save(),s.translate(p,k),s.rotate(g),s.textAlign="center",s.textBaseline="middle",s.fillStyle=f,s.font=d.font,s.fillText(c[0].labelString,0,0),s.restore()}if(r[0].drawBorder){s.lineWidth=i.getValueAtIndexOrDefault(r[0].lineWidth,0),s.strokeStyle=i.getValueAtIndexOrDefault(r[0].color,0);var h=a.left,u=a.right,x=a.top,v=a.bottom,T=i.aliasPixel(s.lineWidth);o?(x=v="top"===n[0].position?a.bottom:a.top,x+=T,v+=T):(h=u="left"===n[0].position?a.right:a.left,h+=T,u+=T),s.beginPath(),s.moveTo(h,x),s.lineTo(u,v),s.stroke()}},calculateTickRotation:function(){var t=this,e=t.ctx,a=t.getScaleOptionsAray("ticks"),s=t.parseFontOptions(a[0]),n=t.labelRotation=a[0].minRotation||0;if(t.options.display){var l=t.ticksDisplayIndex[0],o=t.ticksDisplayIndex[1],r=t.ticksDisplayIndex[t.ticksDisplay.length-2],c=t.ticksDisplayIndex[t.ticksDisplay.length-1];if(t.isHorizontal()){for(var f,d,p=i.longestText(e,s.font,t.ticksDisplay,t.longestTextCache),k=p,g=t.getPixelForTick(o)-t.getPixelForTick(l)-6,m=t.getPixelForTick(c)-t.getPixelForTick(r)-6,h=Math.min(g,m);k>h&&n<a[0].maxRotation;){var u=i.toRadians(n);if(f=Math.cos(u),d=Math.sin(u),d*p>t.maxHeight){n--;break}n++,k=f*p}t.labelRotation=n}}},preventionTicksDisplay:function(){var t=this,e=t.ctx,a=t.getScaleOptionsAray("ticks"),s=t.parseFontOptions(a[0]),n=t.labelRotation;if(t.options.display){var l=t.ticksDisplayIndex[0],o=t.ticksDisplayIndex[1],r=t.ticksDisplayIndex[t.ticksDisplay.length-2],c=t.ticksDisplayIndex[t.ticksDisplay.length-1];if(t.isHorizontal()){var f,d=t.getPixelForTick(o)-t.getPixelForTick(l)-6,p=t.getPixelForTick(c)-t.getPixelForTick(r)-6,k=Math.cos(i.toRadians(n));f=k*e.measureText(t.ticks[o]).width,f=n>25?f/3:f,d<f&&(t.ticksIsDisplay[o]=!1),f=k*e.measureText(t.ticks[c]).width,f=n>25?f/3:f,p<f&&(t.ticksIsDisplay[r]=!1)}else{var g,m;m=Math.round(1.2*s.size*2);for(var h,u,x,v,T,S=[!0,!0,!0],y=0;y<t.ticksDisplay.length-1;y++)h=t.ticksDisplayIndex[y],u=t.ticksDisplayIndex[y+1],v=t.ticksLevel[h],T=t.ticksLevel[u],g=t.getPixelForTick(u)-t.getPixelForTick(h),x=t.ticksIsDisplay[h]&&t.ticksIsDisplay[u]&&g<m,x&&(S[Math.max(v,T)]=!1);for(S[0]=!0,y=1;y<t.ticksIsDisplay.length-1;y++)t.ticksIsDisplay[y]=t.ticksIsDisplay[y]&&S[t.ticksLevel[y]];m=Math.round(1.2*s.size),g=t.getPixelForTick(o)-t.getPixelForTick(l),g<m&&(t.ticksIsDisplay[o]=!1),g=t.getPixelForTick(c)-t.getPixelForTick(r),g<m&&(t.ticksIsDisplay[r]=!1)}}},fit:function(){var t=this,e=t.minSize={width:0,height:0},a=t.getScaleOptionsAray(),s=t.getScaleOptionsAray("ticks"),n=t.getScaleOptionsAray("scaleLabel"),l=t.getScaleOptionsAray("gridLines"),o=a[0].display,r=t.isHorizontal(),c=t.parseFontOptions(s[0]),f=1.5*t.parseFontOptions(n[0]).size,d=a[0].gridLines.tickMarkLength;if(r?e.width=t.isFullWidth()?t.maxWidth-t.margins.left-t.margins.right:t.maxWidth:e.width=o&&l[0].drawTicks?d:0,r?e.height=o&&l[0].drawTicks?d:0:e.height=t.maxHeight,n[0].display&&o&&(r?e.height+=f:e.width+=f),s[0].display&&o){var p=i.longestText(t.ctx,c.font,t.ticksDisplay,t.longestTextCache),k=i.numberOfLabelLines(t.ticks),g=.5*c.size;if(r){t.longestLabelWidth=p;var m=i.toRadians(t.labelRotation),h=Math.cos(m),u=Math.sin(m),x=u*p+c.size*k+g*k;e.height=Math.min(t.maxHeight,e.height+x),t.ctx.font=c.font;var v=t.ticksDisplay[0],T=t.computeTextSize(t.ctx,v,c.font),S=t.ticksDisplay[t.ticksDisplay.length-1],y=t.computeTextSize(t.ctx,S,c.font);0!==t.labelRotation?(t.paddingLeft="bottom"===a[0].position?h*T+3:h*g+3,t.paddingRight="bottom"===a[0].position?h*g+3:h*y+3):(t.paddingLeft=T/2+3,t.paddingRight=y/2+3)}else s[0].mirror?p=0:p+=s[0].padding,e.width+=p,t.paddingTop=c.size/2,t.paddingBottom=c.size/2}t.handleMargins(),t.width=e.width,t.height=e.height},handleMargins:function(){var t=this;t.margins&&(t.paddingLeft=Math.max(t.paddingLeft-t.margins.left,0),t.paddingTop=Math.max(t.paddingTop-t.margins.top,0),t.paddingRight=Math.max(t.paddingRight-t.margins.right,0),t.paddingBottom=Math.max(t.paddingBottom-t.margins.bottom,0))}}}},{}],3:[function(t,i,e){"use strict";i.exports=function(t){var i=t.helpers;t.FineTicks={generators:{niceNumForFineScale:function(t,e,a){var s,n=a?t/(a-1):t,l=Math.floor(i.log10(n)),o=n/Math.pow(10,l);return s=e?o<=1?5:10:o<=1?1:o<=2?2:o<=5?5:10,s*Math.pow(10,l)},fineLinear:function(t,e,a){var s=this,n=[],l=[],o=a?a:s.niceNumForFineScale,r=o(e.max-e.min,!1),c=[];c[0]=o(r,!0,t.maxTicks,0),c[1]=o(c[0],!0,11,1),c[2]=o(c[1],!0,11,2);var f=2;if(t.stepSize&&t.stepSize>0){for(var d=t.stepSize;(e.max-e.min)/d>1e3;)d*=10;for(var p=d,k=0;k<t.levelMax;k++)c[k]<=d&&(c[k]=p,f=0!==p?k:f,p=0);c[f]=c[f]>d?d:c[f]}var g=Math.floor(e.min/c[0])*c[0],m=Math.ceil(e.max/c[0])*c[0];t.min&&t.max&&t.stepSize&&(g=t.min,m=t.max);var h,u,x=void 0!==t.min?t.min:g,v=void 0!==t.max?t.max:m,T=function(t){t=0===t?1:t;var e=Math.floor(i.log10(t));return{digits:e>0?0:Math.abs(e),magnification:Math.pow(10,e)}},S=[T(c[0]),T(c[1]),T(c[2])],y=function(t,i,e,a){var s=(i-t)/a%(e[0]/a),n=(i-t)/a%(e[1]/a);return 0===s?0:0===n?1:2},b=+((m-g)/c[f]).toFixed(S[f].digits);n.push(x),l.push(y(g,x,c,S[f].magnification));for(var D=1;D<b;D++)u=+(g+D*c[f]).toFixed(S[f].digits),u<=x||v<=u||(h=y(g,u,c,S[f].magnification),n.push(+u.toFixed(S[h].digits)),l.push(h));return n.push(v),l.push(y(g,v,c,S[f].magnification)),{ticks:n,levels:l,min:x,max:v}}}}}},{}],4:[function(t,i,e){"use strict";i.exports=function(t){var i=t.helpers,e={position:"left",ticks:{autoSkip:!1},subScale:{display:!0,ticks:{display:!0,fontSize:11},gridLines:{display:!0,drawTicks:!0,color:"rgba(0, 0, 0, 0.07)"},subScale:{display:!0,ticks:{display:!1,fontSize:10},gridLines:{display:!0,drawTicks:!0,color:"rgba(0, 0, 0, 0.03)"}}}},a=t.scaleService.getScaleConstructor("linear").extend(t.FineScale),s=a.extend({ticksReverse:function(){var t=this;t.ticks.reverse(),t.ticksLevel.reverse()},handleDirectionalChanges:function(){var t=this;t.isHorizontal()||t.ticksReverse()},getTickLimit:function(){var e,a=this,s=a.options.ticks;if(a.isHorizontal())e=Math.min(s.maxTicksLimit?s.maxTicksLimit:11,Math.ceil(a.width/25));else{var n=i.getValueOrDefault(s.fontSize,t.defaults.global.defaultFontSize);e=Math.min(s.maxTicksLimit?s.maxTicksLimit:11,Math.ceil(a.height/(1.5*n)))}return Math.max(2,e)},buildTicks:function(){var e=this;e.levelMax=3;var a=e.options,s=[a.ticks,a.subScale.ticks,a.subScale.subScale.ticks],n={maxTicks:e.getTickLimit(),min:s[0].min,max:s[0].max,stepSize:i.getValueOrDefault(s[0].fixedStepSize,s[0].stepSize),optsTick:s,levelMax:e.levelMax},l=t.FineTicks.generators.fineLinear(n,e);e.ticks=l.ticks,e.ticksLevel=l.levels,e.max=l.max,e.min=l.min,e.handleDirectionalChanges(),s[0].reverse?(e.ticksReverse(),e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max)}});t.scaleService.registerScaleType("fineLinear",s,e)}},{}],5:[function(t,i,e){"use strict";i.exports=function(t){var i={position:"left",ticks:{callback:t.Ticks.formatters.linear},subScale:{display:!0,ticks:{display:!0,fontSize:11},gridLines:{display:!0,drawTicks:!0,color:"rgba(0, 0, 0, 0.07)"},subScale:{display:!0,ticks:{display:!1,fontSize:10},gridLines:{display:!0,drawTicks:!0,color:"rgba(0, 0, 0, 0.03)"}}}},e=t.scaleService.getScaleConstructor("linear").extend(t.FineScale),a=e.extend({});t.scaleService.registerScaleType("fineLinearCompatibilityMode",a,i)}},{}],6:[function(t,i,e){"use strict";i.exports=function(t){var i=t.helpers,e={units:[{name:"millisecond",steps:[1,2,5,10,20,50,100,250,500]},{name:"second",steps:[1,2,5,10,30]},{name:"minute",steps:[1,2,5,10,30]},{name:"hour",steps:[1,2,3,6,12]},{name:"day",steps:[1,2,5]},{name:"week",maxStep:4},{name:"month",maxStep:3},{name:"quarter",maxStep:4},{name:"year",maxStep:!1}]},a={position:"bottom",time:{parser:!1,format:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm:ss a",hour:"MMM D, hA",day:"ll",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"}},ticks:{autoSkip:!1},subScale:{display:!0,ticks:{display:!0,fontSize:11},gridLines:{display:!0,drawTicks:!0,color:"rgba(0, 0, 0, 0.07)"},subScale:{display:!0,ticks:{display:!1,fontSize:10},gridLines:{display:!0,drawTicks:!0,color:"rgba(0, 0, 0, 0.03)"}}}},s=t.scaleService.getScaleConstructor("time").extend(t.FineScale),n=s.extend({buildTicks:function(){var a=this;a.ctx.save();var s=i.getValueOrDefault(a.options.ticks.fontSize,t.defaults.global.defaultFontSize),n=i.getValueOrDefault(a.options.ticks.fontStyle,t.defaults.global.defaultFontStyle),l=i.getValueOrDefault(a.options.ticks.fontFamily,t.defaults.global.defaultFontFamily),o=i.fontString(s,n,l);if(a.ctx.font=o,a.ticks=[],a.unitScale=1,a.scaleSizeInUnits=0,a.options.time.unit)a.tickUnit=a.options.time.unit||"day",a.displayFormat=a.options.time.displayFormats[a.tickUnit],a.scaleSizeInUnits=a.lastTick.diff(a.firstTick,a.tickUnit,!0),a.unitScale=i.getValueOrDefault(a.options.time.unitStepSize,1);else{var r=a.isHorizontal()?a.width:a.height,c=a.tickFormatFunction(a.firstTick,0,[]),f=a.ctx.measureText(c).width,d=Math.cos(i.toRadians(a.options.ticks.maxRotation)),p=Math.sin(i.toRadians(a.options.ticks.maxRotation));f=f*d+s*p;var k=r/f;a.tickUnit=a.options.time.minUnit,a.scaleSizeInUnits=a.lastTick.diff(a.firstTick,a.tickUnit,!0),a.displayFormat=a.options.time.displayFormats[a.tickUnit];for(var g=0,m=e.units[g];g<e.units.length;){if(a.unitScale=1,i.isArray(m.steps)&&Math.ceil(a.scaleSizeInUnits/k)<i.max(m.steps)){for(var h=0;h<m.steps.length;++h)if(m.steps[h]>=Math.ceil(a.scaleSizeInUnits/k)){a.unitScale=i.getValueOrDefault(a.options.time.unitStepSize,m.steps[h]);break}break}if(m.maxStep===!1||Math.ceil(a.scaleSizeInUnits/k)<m.maxStep){a.unitScale=i.getValueOrDefault(a.options.time.unitStepSize,Math.ceil(a.scaleSizeInUnits/k));break}++g,m=e.units[g],a.tickUnit=m.name;var u=a.firstTick.diff(a.getMomentStartOf(a.firstTick),a.tickUnit,!0),x=a.getMomentStartOf(a.lastTick.clone().add(1,a.tickUnit)).diff(a.lastTick,a.tickUnit,!0);a.scaleSizeInUnits=a.lastTick.diff(a.firstTick,a.tickUnit,!0)+u+x,a.displayFormat=a.options.time.displayFormats[m.name]}}var v;if(a.options.time.min?v=a.getMomentStartOf(a.firstTick):(a.firstTick=a.getMomentStartOf(a.firstTick),v=a.firstTick),!a.options.time.max){var T=a.getMomentStartOf(a.lastTick),S=T.diff(a.lastTick,a.tickUnit,!0);S<0?a.lastTick=a.getMomentStartOf(a.lastTick.add(1,a.tickUnit)):S>=0&&(a.lastTick=T),a.scaleSizeInUnits=a.lastTick.diff(a.firstTick,a.tickUnit,!0)}a.options.time.displayFormat&&(a.displayFormat=a.options.time.displayFormat),a.ticks.push(a.firstTick.clone());for(var y=1;y<=a.scaleSizeInUnits;++y){var b=v.clone().add(y,a.tickUnit);if(a.options.time.max&&b.diff(a.lastTick,a.tickUnit,!0)>=0)break;y%a.unitScale===0&&a.ticks.push(b)}var D=a.ticks[a.ticks.length-1].diff(a.lastTick,a.tickUnit);0===D&&0!==a.scaleSizeInUnits||(a.options.time.max?(a.ticks.push(a.lastTick.clone()),a.scaleSizeInUnits=a.lastTick.diff(a.ticks[0],a.tickUnit,!0)):(a.ticks.push(a.lastTick.clone()),a.scaleSizeInUnits=a.lastTick.diff(a.firstTick,a.tickUnit,!0))),a.ctx.restore(),a.labelDiffs=void 0}});t.scaleService.registerScaleType("fineTime",n,a)}},{}],7:[function(t,i,e){"use strict";i.exports=function(t){var i=t.helpers,e={position:"left",ticks:{autoSkip:!1},subScale:{display:!0,ticks:{display:!0,fontSize:12},gridLines:{display:!0,drawTicks:!0,color:"rgba(0, 0, 0, 0.07)",tickMarkLength:10},subScale:{display:!0,ticks:{display:!1,fontSize:10},gridLines:{display:!0,drawTicks:!0,color:"rgba(0, 0, 0, 0.03)"}}}},a=t.scaleService.getScaleConstructor("linear"),s=a.extend({ticksReverse:function(){var t=this;t.ticks.reverse(),t.ticksLevel.reverse()},handleDirectionalChanges:function(){var t=this;t.isHorizontal()||t.ticksReverse()},getTickLimit:function(){var e,a=this,s=a.options.ticks;if(a.isHorizontal())e=Math.min(s.maxTicksLimit?s.maxTicksLimit:11,Math.ceil(a.width/50));else{var n=i.getValueOrDefault(s.fontSize,t.defaults.global.defaultFontSize);e=Math.min(s.maxTicksLimit?s.maxTicksLimit:11,Math.ceil(a.height/(2*n)))}return Math.max(2,e)},buildTicks:function(){var e=this;e.levelMax=3;var a=e.options,s=[a.ticks,a.subScale.ticks,a.subScale.subScale.ticks],n={maxTicks:e.getTickLimit(),min:s[0].min,max:s[0].max,stepSize:i.getValueOrDefault(s[0].fixedStepSize,s[0].stepSize),optsTick:s,levelMax:e.levelMax};e.maxTicks=[n.maxTicks,10,10];var l=function(t,e,a,s){var n,l=a?t/(a-1):t,o=Math.floor(i.log10(l)),r=l/Math.pow(10,o),c=[];return e?(c[0]=r<1.5?1:r<3?2:r<7?5:10,c[1]=r<=1?5:10,c[2]=r<=1?5:10,n=c[s]):n=r<=1?1:r<=2?2:r<=5?5:10,n*Math.pow(10,o)},o=t.Ticks.generators.fineLinear(n,e,l);e.ticks=o.ticks,e.ticksLevel=o.levels,e.max=o.max,e.min=o.min,e.handleDirectionalChanges(),s[0].reverse?(e.ticksReverse(),e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max)}});t.scaleService.registerScaleType("linear2",s,e)}},{}]},{},[1]);